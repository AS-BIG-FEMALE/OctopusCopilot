<!DOCTYPE html>
<html lang="en">
<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    <title>Octopus Copilot</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
</head>
<body class="m-3">
<form>
    <div class="form-group row">
        <label for="url" class="col-4 col-form-label">Octopus URL</label>
        <div class="col-8">
            <input id="url" name="url" type="text" class="form-control">
        </div>
    </div>
    <div class="form-group row">
        <label for="api" class="col-4 col-form-label">Octopus API</label>
        <div class="col-8">
            <input id="api" name="api" type="password" class="form-control">
        </div>
    </div>
    <div class="form-group row">
        <label for="query" class="col-4 col-form-label">Query</label>
        <div class="col-8">
            <input id="query" name="query" type="text" class="form-control">
        </div>
    </div>
    <div class="form-group row">
        <label class="col-4 col-form-label" for="textarea">Response</label>
        <div class="col-8">
            <textarea readonly id="textarea" name="textarea" cols="40" rows="5" class="form-control"></textarea>
        </div>
    </div>
    <div class="form-group row">
        <div class="offset-4 col-8">
            <button id="submit" name="submit" type="button" class="btn btn-primary">Submit</button>
        </div>
    </div>
</form>
</body>
<script>
    textarea.value = "Processing..."
    submit.onclick = async function () {
        data = {
            url: url.value,
            api: api.value,
            query: query.value
        }
        fetch("/api/form_handler", {
            method: "POST",
            headers: {
                "Content-Type": "application/json",
            },
            body: JSON.stringify(data), // body data type must match "Content-Type" header
        })
            .then(response => response.text())
            .then(text => textarea.value = text)
    }
</script>
</html>
